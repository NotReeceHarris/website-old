$.ajax({url:"https://ai.reeceharris.net/status_check",type:"GET",success:function(){$("#status").addClass("text-green-400"),$("#status").text("online")},error:function(){$("#status").addClass("text-red-400"),$("#status").text("offline")}});var orientation,SERVER_URL="https://ai.reeceharris.net/",MAX_SIDE_LEN=1280;function onload_func(){EXIF.getData(img,(function(){orientation=EXIF.getTag(this,"Orientation"),[canvas.width,canvas.height]=reduceSize(img.width,img.height,MAX_SIDE_LEN),context.drawImage(img,0,0,canvas.width,canvas.height),resized_img.src=canvas.toDataURL("image/jpeg"),resized_img.classList.add("rounded-md"),resized_img.classList.add("cursor-pointer"),preview.innerHTML="",preview.appendChild(resized_img),send_detect_show()}))}function send_detect_show(){$("#random-image").addClass("hidden");var e=document.getElementById("upload"),t=document.getElementById("processing");e.parentNode.removeChild(e),t.classList.remove("hidden");var a=dataURItoBlob(preview.firstElementChild.src),n=new FormData;n.append("file",a),n.append("orientation",orientation),grecaptcha.ready((function(){grecaptcha.execute("6LckWSkkAAAAAPXSePkWq0nb7sWXwRSpZmCWuNsL",{action:"submit"}).then((function(e){n.append("token",e);var t=new XMLHttpRequest;t.open("POST",SERVER_URL,!0),t.timeout=25e3,t.onload=function(e){if(200===this.status){var a=JSON.parse(t.responseText);preview.firstElementChild.src=a.image,document.getElementById("processing").classList.add("hidden"),document.getElementById("reset-sandbox").classList.remove("hidden"),rld.classList.remove("hide")}else alert("We apologize for the inconvenience, it appears there was a server issue while processing your image. It may not have fully loaded. Please try again in a few minutes. If the problem persists, please contact reeceharris@email.com as soon as possible so we can resolve the issue"),document.getElementById("processing").classList.add("hidden"),document.getElementById("reset-sandbox").classList.remove("hidden"),rld.classList.remove("hide")},t.ontimeout=function(){alert("We apologize for the inconvenience, it appears there was a server issue while processing your image. It may not have fully loaded. Please try again in a few minutes. If the problem persists, please contact reeceharris@email.com as soon as possible so we can resolve the issue"),document.getElementById("processing").classList.add("hidden"),document.getElementById("reset-sandbox").classList.remove("hidden"),rld.classList.remove("hide")},t.send(n)}))}))}function reload(){location.reload()}function dataURItoBlob(e){var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return new Blob([n],{type:a})}function reduceSize(e,t,a){if(Math.max(e,t)<=a)return[e,t];var n=e/t;return e>t?t=(e=a)/n:e=(t=a)*n,[e,t]}upload=document.querySelector("#file-input"),preview=document.querySelector("#preview"),rld=document.querySelector(".reload"),canvas=document.createElement("canvas"),context=canvas.getContext("2d"),img=new Image,resized_img=new Image,$("#random-image").click((function(){const e=["/static/sandbox/park.jpg","/static/sandbox/road.png","/static/sandbox/restaurant.jpg","/static/sandbox/farm.jpg","/static/sandbox/safari.jpg"];img.onload=onload_func,img.src=e[Math.floor(Math.random()*e.length)]})),upload.addEventListener("change",(function(){event.preventDefault(),preview.innerHTML="";var e=new FileReader;e.onload=function(e){e.target.result&&(img.onload=onload_func,img.src=e.target.result)},e.readAsDataURL(event.target.files[0])}));