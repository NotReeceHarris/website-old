<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- SITE META -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="publisher" content="reeceharris.net">  
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="robots" content="all">
        <!-- SEO TAGS -->
        <title>Project: <%= portfolio.attributes.title %></title>
        <link rel="canonical" href="<%= locals.url %>">
        <meta name="description" content="<%= portfolio.attributes.description.substring(0, 155) %><% if (portfolio.attributes.description.length > 155) { %>...<% } %>">
        <meta name="author" content="Reece Harris">
        <meta name="keywords" content="ai,blog,technology,portfolio">
        <!-- SOCIAL TAGS -->
        <meta property="og:site_name" content="( ͡°( ͡° ͜ʖ( ͡° ͜ʖ ͡°)ʖ ͡°) ͡°)">
        <meta property="og:title" content="Project: <%= portfolio.attributes.title %>" />
        <meta property="og:description" content="<%= portfolio.attributes.description.substring(0, 155) %><% if (portfolio.attributes.description.length > 155) { %>...<% } %>">
        <meta property="og:type" content="website" />
        <meta property="og:url" content="<%= locals.url %>" />
        <meta name="theme-color" content="#ffffff">
        <!-- TWITTER TAGS -->
        <meta name="twitter:title" content="Project: <%= portfolio.attributes.title %>">
        <meta name="twitter:description" content="<%= portfolio.attributes.description.substring(0, 155) %><% if (portfolio.attributes.description.length > 155) { %>...<% } %>">
        <meta name="twitter:site" content="@n0treeceharris">
        <!-- ASSETS -->
<script src="/static/js/tailwind.min.js" crossorigin="anonymous"></script><link rel="stylesheet" href="/static/css/style.css">        <script src="/static/js/jquery.min.js"  crossorigin="anonymous"></script>

        <link rel="stylesheet" href="/static/css/lightbox.min.css">
       


        <link href=" https://cdn.jsdelivr.net/npm/glidejs@2.1.0/dist/css/glide.core.min.css " rel="stylesheet">

        <style>
            .glide__bullet--active {
                opacity: 1 !important;
            }

            li {
                padding-top: 10px;
            }

            ul {
                list-style-type: disc !important;
                margin-left: 15px !important;
            }

            strong {
                font-weight: 900 !important;
            }
        </style>

    </head>

    <body class="bg-[#222222]">
        
        <%- include('../components/header.ejs'); %>

            <section class="mt-12 md:mt-20 min-h-[80vh]">
                <div class="py-8 px-4 mx-auto max-w-screen-xl lg:py-8 lg:px-6">
                
                    <div class="flex flex-col gap-6">
                        <div class="w-full flex justify-end">
                            <a href="/portfolio" class="text-blue-400 flex gap-1 items-center cursor-pointer">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                                Go Back
                            </a>
                        </div>
                        
                        <div class="glide w-full">
                            <% if (portfolio.attributes.screenshots.data.length > 1) { %>
                                <div data-glide-el="track" class="glide__track">
                                    <ul class="glide__slides">
                                        
                                        <% for(var i=0; i<portfolio.attributes.screenshots.data.length; i++) {%>
                                            <li class="glide__slide">
                                                <a data-lightbox="<%= portfolio.attributes.screenshots.data[i].id %>" href="https://cms.reeceharris.net<%= portfolio.attributes.screenshots.data[i].attributes.url %>">
                                                    <img
                                                    alt="<%= portfolio.attributes.screenshots.data[i].attributes.name %>"
                                                    src="https://cms.reeceharris.net<%= portfolio.attributes.screenshots.data[i].attributes.url %>"
                                                    class="rounded-md object-cover cursor-pointer"
                                                />
                                                </a>
                                            </li>
                                        <% } %>
                                    </ul>
                                </div>

                            <% } else { %>
                                <a data-lightbox="<%= portfolio.attributes.screenshots.data[0].id %>" href="https://cms.reeceharris.net<%= portfolio.attributes.screenshots.data[0].attributes.url %>" >
                                    <img
                                    alt="<%= portfolio.attributes.screenshots.data[0].attributes.name %>"
                                    src="https://cms.reeceharris.net<%= portfolio.attributes.screenshots.data[0].attributes.url %>"
                                    class="rounded-md object-cover max-h-[266px] mx-auto"
                                />
                                </a>
                                
                            <% } %>
                        </div>

                        <h1 id="title" class="text-4xl text-white">
                            <%= portfolio.attributes.title %>
                        </h1>
                        <p id="description" class="text-white font-light text-lg">
                            <%= portfolio.attributes.description %>
                        </p>
                        <% if (portfolio.attributes.url) { %>
                            <a id="project-url" href="<%= portfolio.attributes.url %>" target="_blank" class="text-blue-400 inline-flex gap-1 items-center" href="">
                                <%= portfolio.attributes.url %>
                                <svg class="w-3.5 h-3.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                            </a>
                        <% } %> 
                        <div id="content" class="text-white font-light border-t pt-6 border-[#444]">
                            <%- portfolio.attributes.content %>
                        </div>
                    </div>
    
                </div>
            </section>

        <%- include('../components/footer.ejs'); %>
        

    </body>

    <script src="https://cdn.jsdelivr.net/npm/@glidejs/glide"></script>
    <script src="https://cdn.jsdelivr.net/npm/lightbox2@2.11.4/dist/js/lightbox.min.js"></script>

    <script>
        lightbox.option({
        'resizeDuration': 200,
        'wrapAround': true,
        albumLabel: false
        })
    </script>

    <% if (portfolio.attributes.screenshots.data.length > 1) { %>
        <script>

            let startAt = 1
    
            if (window.innerWidth < 1024) {
                startAt = 0
            }
    
            new Glide('.glide', {
                type: 'carousel',
                focusAt: 'center',
                startAt,
                //startAt: Math.round(parseInt('<%= portfolio.attributes.screenshots.data.length %>')/2)-1,
                hoverpause: true,
                dragThreshold: 120,
                autoplay: 4000,
                perTouch: 1,
                perView: 3,
                gap: 15,
                breakpoints: {
                    1024: {
                        perView: 2
                    },
                    600: {
                        perView: 1
                    }
                }
            }).mount()
    
            $('#content h2').addClass('text-xl md:text-2xl font-bold mb-2')
        </script>
    <% } else { %>
        <script>
            $('#content h2').addClass('text-xl md:text-2xl font-bold mb-2')
        </script>
    <% } %>

</html>